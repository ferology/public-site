version: 1
frontend:
  phases:
    preBuild:
      commands:
        # Install dependencies for the 'works' project.
        # Since amplify.yml is already in 'works', no 'cd' is needed here.
        - npm ci # or 'pnpm install' based on your pnpm-lock.yaml
    build:
      commands:
        # Build the 'works' project.
        # For Vite, 'npm run build' typically creates a 'dist' folder.
        - npm run build
    postBuild:
      commands:
        - echo "Build complete for the 'works' subfolder project."
  artifacts:
    # This is the directory that Amplify will serve, relative to the 'works' folder.
    # For Vite projects, the default output directory is 'dist'.
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      # Cache dependencies for the 'works' project.
      - node_modules/**/*
